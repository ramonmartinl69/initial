/*C2*/SET SCHEMA PUBLIC
alter table address drop constraint FK_1n9ajfkgylhsa5kpcpethb8dd
alter table person drop constraint FK_c9xaw0adhjad89xb9p6wkrjnm
alter table security_user drop constraint FK_7jmv0u8pgo323uvrum3m8p8uw
alter table security_user_roles drop constraint FK_9kb5q9evu1lp5blu1ens1uxy9
alter table security_user_roles drop constraint FK_ddw0s7raea6lrn8drchvqyajs
drop table address if exists
drop table person if exists
drop table security_role if exists
drop table security_user if exists
drop table security_user_roles if exists
create table address (dtype varchar(31) not null, id_address bigint generated by default as identity (start with 1), addres_number varchar(250) not null, address varchar(250) not null, address_type integer not null, country integer, location_type integer not null, population varchar(250) not null, postal_code varchar(10) not null, province integer not null, opt_lock integer, enterprise_name varchar(250), postal_address varchar(250), active boolean, id_person bigint, primary key (id_address))
create table person (id_user bigint generated by default as identity (start with 1), alternate_question varchar(100), alternate_response varchar(100), birth_date timestamp not null, first_name varchar(50) not null, last_name varchar(50) not null, last_name2 varchar(50) not null, nif varchar(15) not null, nationality integer, phone varchar(15) not null, photo_file blob(255), question integer, response varchar(100), opt_lock integer, principal bigint, primary key (id_user))
create table security_role (id_role bigint generated by default as identity (start with 1), authority integer not null, role_name varchar(100) not null, opt_lock integer, primary key (id_role))
create table security_user (id_user bigint generated by default as identity (start with 1), activation_key varchar(100), enabled boolean, password varchar(100) not null, user_name varchar(50) not null, opt_lock integer, id_person bigint, primary key (id_user))
create table security_user_roles (security_user bigint not null, roles bigint not null, primary key (security_user, roles))
alter table address add constraint FK_1n9ajfkgylhsa5kpcpethb8dd foreign key (id_person) references person
alter table person add constraint FK_c9xaw0adhjad89xb9p6wkrjnm foreign key (principal) references security_user
alter table security_user add constraint FK_7jmv0u8pgo323uvrum3m8p8uw foreign key (id_person) references person
alter table security_user_roles add constraint FK_9kb5q9evu1lp5blu1ens1uxy9 foreign key (roles) references security_role
alter table security_user_roles add constraint FK_ddw0s7raea6lrn8drchvqyajs foreign key (security_user) references security_user
